<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
		<META HTTP-EQUIV="Expires" CONTENT="-1">
		<meta charset="utf-8" />
		<title>xmedialauncher</title>
		
		<script type="text/JavaScript" src="global.js?n=1"></script> 
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="assets/css/font-awesome.min.css" />

		<!-- page specific plugin styles -->
		<link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.css" />

		<!-- text fonts -->
		<link rel="stylesheet" href="assets/css/ace-fonts.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="assets/css/ace.min.css" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" />
		<![endif]-->
		<link rel="stylesheet" href="assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="assets/css/ace-rtl.min.css" />

		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="assets/js/ace-extra.min.js"></script>

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->
	</head>

	<body class="no-skin">
		<!-- #section:basics/navbar.layout -->
		<div id="navbar" class="navbar navbar-default">
			<script type="text/javascript">
				try{ace.settings.check('navbar' , 'fixed')}catch(e){}
			</script>

			<div class="navbar-container" id="navbar-container">
				<!-- #section:basics/sidebar.mobile.toggle -->
				<button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler">
					<span class="sr-only">Toggle sidebar</span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>
				</button>

				<!-- /section:basics/sidebar.mobile.toggle -->
				<div class="navbar-header pull-left">
					<!-- #section:basics/navbar.layout.brand -->
					<a href="#" class="navbar-brand">
						<small>
							
							<!-- <span id='AccountName'></span> -->
							<img src="image/vin.png">
						</small>
					</a>

					<!-- /section:basics/navbar.layout.brand -->

					<!-- #section:basics/navbar.toggle -->

					<!-- /section:basics/navbar.toggle -->
				</div>

				<!-- #section:basics/navbar.dropdown -->
				<div class="navbar-buttons navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						

						
					</ul>
				</div>

				<!-- /section:basics/navbar.dropdown -->
			</div><!-- /.navbar-container -->
		</div>

		<!-- /section:basics/navbar.layout -->
		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

			<!-- #section:basics/sidebar -->
			<div id="sidebar" class="sidebar                  responsive">
				<script type="text/javascript">
					try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
				</script>

				

				<ul class="nav nav-list">
					<li class="">
						<a href="#">
							<i></i>
							<span class="menu-text"> </span>
						</a>

						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="dashboard.html">
							<i class="menu-icon fa fa-home"></i>
							<span class="menu-text"> Home </span>
						</a>

						<b class="arrow"></b>
					</li>
					
					<li class="">
						<a href="#" class="dropdown-toggle">
							<i class="menu-icon fa fa-user"></i>
							<span class="menu-text"> Contacts </span>

							<b class="arrow fa fa-angle-down"></b>
						</a>

						<b class="arrow"></b>

						<ul class="submenu">
							<li class="">
								<a href="contacts.html">
									<i class="menu-icon fa fa-caret-right"></i>
									Upload Contacts
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="viewContacts.html">
									<i class="menu-icon fa fa-caret-right"></i>
									View Contacts
								</a>

								<b class="arrow"></b>
							</li>
							<li class="">
								<a href="contactTemplate.html">
									<i class="menu-icon fa fa-caret-right"></i>
									Contact Templates
								</a>

								<b class="arrow"></b>
							</li>
							
						</ul>

					</li>

					<li class="active">
						<a href="Maml.html">
							<i class="menu-icon fa fa-list-alt"></i>
							<span class="menu-text"> Launch Program </span>
						</a>

						<b class="arrow"></b>
					</li>

					<li class="">
						<a href="#" class="dropdown-toggle">
							<i class="menu-icon fa fa-pencil-square-o"></i>
							<span class="menu-text"> Admin </span>

							<b class="arrow fa fa-angle-down"></b>
						</a>

						<b class="arrow"></b>

						<ul class="submenu">
							<li class="">
								<a href="Account.html">
									<i class="menu-icon fa fa-caret-right"></i>
									<span class="menu-text"> Account </span>
								</a>

								<b class="arrow"></b>
							</li>

							<li class="">
								<a href="users.html">
									<i class="menu-icon fa fa-caret-right"></i>
									<span class="menu-text"> User </span>
								</a>

								<b class="arrow"></b>
							</li>
							
						</ul>

					</li>

					<li class="">
						
						<a href="javascript:void(0)" onclick="logout();">
							<i class="menu-icon fa fa-power-off"></i>
							<span class="menu-text"> Logout </span>							
						</a>

						<b class="arrow"></b>
					</li>

					

					

					
				</ul><!-- /.nav-list -->

				<!-- #section:basics/sidebar.layout.minimize -->
				<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
					<i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
				</div>

				<!-- /section:basics/sidebar.layout.minimize -->
				<script type="text/javascript">
					try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
				</script>
			</div>

			<!-- /section:basics/sidebar -->
			
			<div class="main-content">
				<!-- #section:basics/content.breadcrumbs -->
				<div class="breadcrumbs" id="breadcrumbs">
					<script type="text/javascript">
						try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
					</script>

					<ul class="breadcrumb">
						

						<li>
							Launch Program
						</li>
						
						<li class="active" id='programName' ></li>
					</ul><!-- /.breadcrumb -->

					
				</div>

				<!-- /section:basics/content.breadcrumbs -->
				<div class="page-content">
					
					
					<div class="row">
						<div class="col-xs-12">
							<!-- PAGE CONTENT BEGINS -->
							
							<form action="LaunchMaml.php" method="post" enctype="multipart/form-data" class="form-horizontal" role="form" id='form1'>
								<fieldset>
									<!-- <input type="hidden" name="importFile" id="importFile" value="">
									Click <a href="javascript:void(0)" onclick="uploadFile();">here</a> to select file to import.
									<br> -->


									<div id="importDiv">																	

										<div class="form-group" id="LaunchDateDiv" style="display: none">
											<label class="col-sm-3 control-label no-padding-right" for="LaunchDate"> Launch Date : </label>

											<div class="col-sm-9">
												<input id="LaunchDate" type="text" class="col-xs-10 col-sm-5" />
												<i class="fa fa-clock-o bigger-200"></i>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="ContactList"> Send to : </label>

											<!-- <div class="col-sm-9">
												<select class="col-xs-10 col-sm-5"  id="ContactList">
												</select>
											</div> -->
											<div class="col-sm-9">

												<label class="col-sm-2">
													<input name="ContactRadio" type="radio" class="ace" value = "all" onclick="ContactClick('1');" checked/>
													<span class="lbl">  All Contacts</span>
												</label>
												
												<label class="col-sm-2">
													<input name="ContactRadio" type="radio" class="ace" value = "list" onclick="ContactClick('2');"/>
													<span class="lbl">  Contact Lists</span>
												</label>

												<label class="col-sm-3">
													<input name="ContactRadio" type="radio" class="ace" value = "email" onclick="ContactClick('3');"/>
													<span class="lbl">  Contact Emails</span>
												</label>

												<div id='listDiv' style="display: none">											<br>	
													<br>
													<select class="form-control" id="listSelect" multiple="multiple">
													</select>

												</div>

												<div id='emailDiv' style="display: none">
													<br>
													<br>			
													<select class="form-control" id="emailSelect" multiple="multiple">
													</select>
												</div>

											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="ProgramName"> Program Name : </label>

											<div class="col-sm-9">
												<input type="text" id='ProgramName' placeholder="Program Name" class="col-xs-10 col-sm-5" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="EmailFromAddress"> Email From Address : </label>

											<div class="col-sm-9">
												<input type="text" id='EmailFromAddress' placeholder="Email From Address" class="col-xs-10 col-sm-5" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="EmailFromName"> Email From Name : </label>

											<div class="col-sm-9">
												<input type="text" id='EmailFromName' placeholder="Email From Name" class="col-xs-10 col-sm-5" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="ReplyToEmailAddress"> Reply To Email Address : </label>

											<div class="col-sm-9">
												<input type="text" id='ReplyToEmailAddress' placeholder="Reply To Email Address" class="col-xs-10 col-sm-5" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="EmailSubject"> Email Subject : </label>

											<div class="col-sm-9">
												<input type="text" id='EmailSubject' placeholder="Email Subject" class="col-xs-10 col-sm-5" />
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="HTMLContent"> HTML Content : </label>

											<div class="col-sm-9">
												<!-- <textarea class="autosize-transition form-control" id="HTMLContent" placeholder="HTML Content" rows="7"></textarea> -->
												<div class="wysiwyg-editor" id="editor1"></div>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label no-padding-right" for="TextOnlyContent"> Text Only Content : </label>

											<div class="col-sm-9">
												<textarea class="autosize-transition form-control" id="TextOnlyContent" placeholder="Text Only Content" rows="7"></textarea>
											</div>
										</div>
										
										
										<div id='variableDiv' class="form-group" style="display: none">
											<h3 class="header smaller lighter blue">
												Content Variable
											</h3>
										</div>

										<div id='domainDiv' class="form-group" style="display: none">
											<h3 class="header smaller lighter blue">
												Domain
											</h3>
										</div>

										<div class="clearfix form-actions">
											<div class="col-md-offset-3 col-md-9">
												<button class="btn btn-info" type="button" onclick="LaunchMaml();">
													<i class="ace-icon fa fa-check bigger-110"></i>
													Launch
												</button>

												
											</div>
										</div>

									</div>
								</fieldset>
							</form>
													
							

							<!-- PAGE CONTENT ENDS -->
						</div><!-- /.col -->
					</div><!-- /.row -->
				</div><!-- /.page-content -->
			</div><!-- /.main-content -->

			<div class="footer">
				<div class="footer-inner">
					
				</div>
			</div>

			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
			</a>
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='assets/js/jquery.min.js'>"+"<"+"/script>");

			
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery1x.min.js'>"+"<"+"/script>");
</script>
<![endif]-->
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="assets/js/bootstrap.min.js"></script>

		<!-- page specific plugin scripts -->
		<script src="assets/js/date-time/moment.min.js"></script>
		<script src="assets/js/date-time/bootstrap-datetimepicker.min.js"></script>
		<script src="assets/js/bootstrap-wysiwyg.min.js"></script>
		<script src="assets/js/jquery-ui.custom.min.js"></script>
		<script src="assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="assets/js/markdown/markdown.min.js"></script>
		<script src="assets/js/markdown/bootstrap-markdown.min.js"></script>
		<script src="assets/js/jquery.hotkeys.min.js"></script>
		<script src="assets/js/bootbox.min.js"></script>

		<!-- ace scripts -->
		<script src="assets/js/ace-elements.min.js"></script>
		<script src="assets/js/ace.min.js"></script>

		<!-- inline scripts related to this page -->
		<link rel="stylesheet" href="assets/css/ace.onpage-help.css" />


		<script type="text/javascript"> ace.vars['base'] = '..'; </script>
		<script src="assets/js/ace/ace.onpage-help.js"></script>

		<script type="text/javascript">
			jQuery(function($){
	
				function showErrorAlert (reason, detail) {
					var msg='';
					if (reason==='unsupported-file-type') { msg = "Unsupported format " +detail; }
					else {
						//console.log("error uploading file", reason, detail);
					}
					$('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>'+ 
					 '<strong>File upload error</strong> '+msg+' </div>').prependTo('#alerts');
				}

				//$('#editor1').ace_wysiwyg();//this will create the default editor will all buttons

				//but we want to change a few buttons colors for the third style
				$('#editor1').ace_wysiwyg({
					toolbar:
					[
						'font',
						null,
						'fontSize',
						null,
						{name:'bold', className:'btn-info'},
						{name:'italic', className:'btn-info'},
						{name:'strikethrough', className:'btn-info'},
						{name:'underline', className:'btn-info'},
						null,
						{name:'insertunorderedlist', className:'btn-success'},
						{name:'insertorderedlist', className:'btn-success'},
						{name:'outdent', className:'btn-purple'},
						{name:'indent', className:'btn-purple'},
						null,
						{name:'justifyleft', className:'btn-primary'},
						{name:'justifycenter', className:'btn-primary'},
						{name:'justifyright', className:'btn-primary'},
						{name:'justifyfull', className:'btn-inverse'},
						null,
						{name:'createLink', className:'btn-pink'},
						{name:'unlink', className:'btn-pink'},
						null,
						{name:'insertImage', className:'btn-success'},
						null,
						'foreColor',
						null,
						'backColor',
						null,
						{name:'undo', className:'btn-grey'},
						{name:'redo', className:'btn-grey'},
						null,
						'viewSource'
					],
					'wysiwyg': {
						fileUploadError: showErrorAlert
					}
				}).prev().addClass('wysiwyg-style2');

				
				/**
				//make the editor have all the available height
				$(window).on('resize.editor', function() {
					var offset = $('#editor1').parent().offset();
					var winHeight =  $(this).height();
					
					$('#editor1').css({'height':winHeight - offset.top - 10, 'max-height': 'none'});
				}).triggerHandler('resize.editor');
				*/
				

				$('#editor2').css({'height':'200px'}).ace_wysiwyg({
					toolbar_place: function(toolbar) {
						return $(this).closest('.widget-box')
							   .find('.widget-header').prepend(toolbar)
							   .find('.wysiwyg-toolbar').addClass('inline');
					},
					toolbar:
					[
						'bold',
						{name:'italic' , title:'Change Title!', icon: 'ace-icon fa fa-leaf'},
						'strikethrough',
						null,
						'insertunorderedlist',
						'insertorderedlist',
						null,
						'justifyleft',
						'justifycenter',
						'justifyright'
					],
					speech_button: false
				});
				
				


				$('[data-toggle="buttons"] .btn').on('click', function(e){
					var target = $(this).find('input[type=radio]');
					var which = parseInt(target.val());
					var toolbar = $('#editor1').prev().get(0);
					if(which >= 1 && which <= 4) {
						toolbar.className = toolbar.className.replace(/wysiwyg\-style(1|2)/g , '');
						if(which == 1) $(toolbar).addClass('wysiwyg-style1');
						else if(which == 2) $(toolbar).addClass('wysiwyg-style2');
						if(which == 4) {
							$(toolbar).find('.btn-group > .btn').addClass('btn-white btn-round');
						} else $(toolbar).find('.btn-group > .btn-white').removeClass('btn-white btn-round');
					}
				});


				

				//RESIZE IMAGE
				
				//Add Image Resize Functionality to Chrome and Safari
				//webkit browsers don't have image resize functionality when content is editable
				//so let's add something using jQuery UI resizable
				//another option would be opening a dialog for user to enter dimensions.
				if ( typeof jQuery.ui !== 'undefined' && ace.vars['webkit'] ) {
					
					var lastResizableImg = null;
					function destroyResizable() {
						if(lastResizableImg == null) return;
						lastResizableImg.resizable( "destroy" );
						lastResizableImg.removeData('resizable');
						lastResizableImg = null;
					}

					var enableImageResize = function() {
						$('.wysiwyg-editor')
						.on('mousedown', function(e) {
							var target = $(e.target);
							if( e.target instanceof HTMLImageElement ) {
								if( !target.data('resizable') ) {
									target.resizable({
										aspectRatio: e.target.width / e.target.height,
									});
									target.data('resizable', true);
									
									if( lastResizableImg != null ) {
										//disable previous resizable image
										lastResizableImg.resizable( "destroy" );
										lastResizableImg.removeData('resizable');
									}
									lastResizableImg = target;
								}
							}
						})
						.on('click', function(e) {
							if( lastResizableImg != null && !(e.target instanceof HTMLImageElement) ) {
								destroyResizable();
							}
						})
						.on('keydown', function() {
							destroyResizable();
						});
					};

					enableImageResize();

					/**
					//or we can load the jQuery UI dynamically only if needed
					if (typeof jQuery.ui !== 'undefined') enableImageResize();
					else {//load jQuery UI if not loaded
						$.getScript($path_assets+"/js/jquery-ui.custom.min.js", function(data, textStatus, jqxhr) {
							enableImageResize()
						});
					}
					*/
				}


			});
					</script>

		<script type="text/javascript">
			jQuery(function($) {
				$('#LaunchDate').datetimepicker().next().on(ace.click_event, function(){
					$(this).prev().focus();
				});

				

			});

						
			$(document).ready(function(e) {		
				
				var canLogin = readCookie("canLogin");
				if (canLogin == "Yes") {
					var loginAccountName = readCookie("loginAccountName");
					$('#AccountName').html(loginAccountName);
					var programName = getParameterByName('programName');
					$('#programName').html(programName);
					var programID = getParameterByName('programID');
					LoadProgram(programID);
					
				} else {
					location.href = 'login.html';
				}
			});

			function LoadProgram(programID) {
				
				if (programID == '1') {
					$('#LaunchDateDiv').show();
				}
				GetMaml(programID);
				GetEmailList();
				GetImportList();
			}

			function LaunchMaml() {
				var programID = getParameterByName('programID');
				var LaunchDate = $('#LaunchDate').val();
				if (programID == '1') {
					if (LaunchDate == '') {
						alert('Please enter Launch Date.');
						return;
					}
				}
				var ContactRadioVal = $('input:radio[name=ContactRadio]:checked').val();
				
				
				
				var emailSelectData = $('#emailSelect').val();				
				var listSelectData = $('#listSelect').val();
				if (ContactRadioVal == 'list') {					
					if (listSelectData == '') {
						alert('Please select Contact Lists.');
						return;
					}
				} else if (ContactRadioVal == 'email') {
					if (emailSelectData == '') {
						alert('Please select Contact Emails.');
						return;
					}
				}
				
				var ProgramName  = $('#ProgramName').val();
				ProgramName = ProgramName.trim();
				if (ProgramName == '') {
					alert('Please enter Program Name.');
					return;
				}
				
				
				var EmailFromAddress  = $('#EmailFromAddress').val();
				var EmailFromName  = $('#EmailFromName').val();
				var ReplyToEmailAddress  = $('#ReplyToEmailAddress').val();
				var EmailSubject  = $('#EmailSubject').val();
				var HTMLContent  = $('#editor1').html();
				var TextOnlyContent  = $('#TextOnlyContent').val();
				var email = readCookie("loginEmail");
				var pwd = readCookie("loginPassword");		
				var account = readCookie("loginAccount");
				var PartnerGuid = readCookie("PartnerGuid");
				var PartnerPassword = readCookie("PartnerPassword");
				
				//alert('PartnerGuid = '+PartnerGuid);
				var selectedEmail = '';

				$('select#emailSelect > option:selected').each(function() {
					selectedEmail = selectedEmail+','+$(this).val();
				});

				

				var selectedList = '';

				$('select#listSelect > option:selected').each(function() {
					selectedList = selectedList+','+$(this).val();
				});
				
				var myVars = $( "form" ).serializeArray();
				
				
				var projecturl = getProjectURL();
				var json = $.getJSON(projecturl+"LaunchMaml.php?callback=?", {
					email: email,
					pwd: pwd,
					account: account,
					programID: programID,
					LaunchDate: LaunchDate,
					ContactRadio: ContactRadioVal,
					emailData: selectedEmail,
					listData: selectedList,
					ProgramName: ProgramName,
					EmailFromAddress: EmailFromAddress,
					EmailFromName: EmailFromName,
					ReplyToEmailAddress: ReplyToEmailAddress,
					EmailSubject: EmailSubject,
					HTMLContent: HTMLContent,
					TextOnlyContent: TextOnlyContent,
					data: myVars,
					PartnerGuid: PartnerGuid,
					PartnerPassword: PartnerPassword
					
				})
				.success(function(json) {
					if( json.success ) {
						alert("Launch successfully.");
						location.href = 'Maml.html';						
					} else {
						alert(json.message);
					}
				})
				.error(function() {
				  alert("A connection error occured. Please try again.");
				})
				.complete(function() {
				  
				});

			}

			function GetEmailList() {
				
				var email = readCookie("loginEmail");
				var pwd = readCookie("loginPassword");		
				var account = readCookie("loginAccount");
				var PartnerGuid = readCookie("PartnerGuid");
				var PartnerPassword = readCookie("PartnerPassword");				
				var projecturl = getProjectURL();
				pwd = encodeURIComponent(pwd);
				var grid_data = []; 
				grid_data = eval(getRemote(projecturl+'getContact.php?email='+email+'&pwd='+pwd+'&account='+account+'&PartnerGuid='+PartnerGuid+'&PartnerPassword='+PartnerPassword+'&rnd=' + new Date().getTime()));
				var data = '';
				for (i = 0; i < grid_data.length; i++) {
					data += '<option value="'+ grid_data[i]['Email'] +'">'+ grid_data[i]['Email']+' ['+grid_data[i]['FirstName']+' '+grid_data[i]['LastName']+']</option>';
				}
				$('#emailSelect').html(data);
				Sort('emailSelect');	
				
				
			}

			function GetImportList() {
				
				var email = readCookie("loginEmail");
				var pwd = readCookie("loginPassword");		
				var account = readCookie("loginAccount");
				var PartnerGuid = readCookie("PartnerGuid");
				var PartnerPassword = readCookie("PartnerPassword");
				var projecturl = getProjectURL();
				pwd = encodeURIComponent(pwd);
				var import_data = []; 
				import_data = eval(getRemote(projecturl+'getImportName.php?email='+email+'&pwd='+pwd+'&account='+account+'&PartnerGuid='+PartnerGuid+'&PartnerPassword='+PartnerPassword+'&rnd=' + new Date().getTime()));
				var data = '';
				for (i = 0; i < import_data.length; i++) {
					data += '<option value="'+ import_data[i]['Name'] +'">'+ import_data[i]['Name']+'</option>';
				}
				$('#listSelect').html(data);
				Sort('listSelect');	
				
				
			}

			function GetMaml(programID) {
				
						
				var projecturl = getProjectURL();
				var json = $.getJSON(projecturl+"getMaml.php?callback=?", {
					programID: programID
				})
				.success(function(json) {
					$('#EmailFromAddress').val(json.EmailFromAddress);
					$('#EmailFromName').val(json.EmailFromName);
					$('#ReplyToEmailAddress').val(json.ReplyToEmailAddress);
					$('#EmailSubject').val(json.EmailSubject);
					$('#editor1').html(json.HTMLContent);
					$('#TextOnlyContent').html(json.TextOnlyContent);
					
					$('#variableDiv').hide();
					var contentList = '';
					if (json.contentArray) {
						var contentArray = json.contentArray;
						for( var j = 0 ; j < contentArray.length ; j++ ) {
							var s1 = contentArray[j][0];
							var s2 = contentArray[j][1];
							
							//contentList = contentList+
							//"<label class='col-sm-3 control-label no-padding-right' for='"+s1+"'> Reply To Email Address : </label>"+
							//"<div class='col-sm-9'>"+
							//"<input type='text' id='"+s1"+' placeholder='"+s2+"' class='col-xs-10 col-sm-5' /></div>";
							contentList = contentList+
							'<div class="form-group"><label class="col-sm-3 control-label no-padding-right" for="'+s1+'"> '+s1+' : </label> <div class="col-sm-9"> <input type="text" name="'+s1+'" id="'+s1+'" placeholder="'+s2+'" class="col-xs-10 col-sm-5" /> </div></div>';
						}
					}
					if (contentList != '') {
						contentList = '<h3 class="header smaller lighter blue">Content Variable</h3>'+contentList;
						$('#variableDiv').html(contentList);
						$('#variableDiv').show();
					}
					
					if (json.campaignArray) {	
						$('#domainDiv').hide();
						var domainList = '';
						if (domainList != '') {
							domainList = '<h3 class="header smaller lighter blue">Domain</h3>'+domainList;
							$('#domainDiv').html(contentList);
							$('#domainDiv').show();
						}
					}
				})
				.error(function() {
				  alert("A connection error occured. Please try again.");
				})
				.complete(function() {
				  
				});
			}

			function ContactClick(mode) {
				$('#listDiv').hide();
				$('#emailDiv').hide();
				if (mode == '2') {
					$('#listDiv').show();
				} else if (mode == '3') {
					$('#emailDiv').show();
				}
			}
				
			
		</script>
	</body>
</html>
